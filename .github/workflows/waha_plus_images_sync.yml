name: Waha Plus Images Sync
on:
  workflow_dispatch:
    inputs:
      release_number:
        description: "Release number"
        required: false
        type: string
jobs:
  cpu_x86:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout sources
        uses: actions/checkout@v4
      - name: Login to devlikeapro Docker HUb
        uses: docker/login-action@v3
        with:
          username: ${{ vars.DEVLIKEAPRO_DOCKERHUB_USERNAME }}
          password: ${{ secrets.DEVLIKEAPRO_DOCKERHUB_TOKEN }}
      - name: Pull Waha Plus images
        run: |
          docker pull devlikeapro/waha-plus:latest
          docker pull devlikeapro/waha-plus:gows
          docker pull devlikeapro/waha-plus:noweb
      - name: Tag images
        run: |
          docker tag devlikeapro/waha-plus:latest nanzinmedina/waha-plus:latest
          docker tag devlikeapro/waha-plus:latest nanzinmedina/waha-plus:chromium
          docker tag devlikeapro/waha-plus:gows nanzinmedina/waha-plus:gows
          docker tag devlikeapro/waha-plus:noweb nanzinmedina/waha-plus:noweb
      - name: Login to nanzinmedina Docker HUb
        uses: docker/login-action@v3
        with:
          username: ${{ vars.NANZINMEDINA_DOCKERHUB_USERNAME }}
          password: ${{ secrets.NANZINMEDINA_DOCKERHUB_TOKEN }}
      - name: Push images to nanzinmedina Docker HUb
        run: |
          docker push nanzinmedina/waha-plus:latest
          docker push nanzinmedina/waha-plus:chromium
          docker push nanzinmedina/waha-plus:gows
          docker push nanzinmedina/waha-plus:noweb
  cpu_arm:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout sources
        uses: actions/checkout@v4
      - name: Login to devlikeapro Docker HUb
        uses: docker/login-action@v3
        with:
          username: ${{ vars.DEVLIKEAPRO_DOCKERHUB_USERNAME }}
          password: ${{ secrets.DEVLIKEAPRO_DOCKERHUB_TOKEN }}
      - name: Pull Waha Plus images
        run: |
          docker pull devlikeapro/waha-plus:latest-arm
          docker pull devlikeapro/waha-plus:gows-arm
          docker pull devlikeapro/waha-plus:noweb-arm
      - name: Tag images
        run: |
          docker tag devlikeapro/waha-plus:latest-arm nanzinmedina/waha-plus:latest-arm
          docker tag devlikeapro/waha-plus:latest-arm nanzinmedina/waha-plus:chromium-arm
          docker tag devlikeapro/waha-plus:gows-arm nanzinmedina/waha-plus:gows-arm
          docker tag devlikeapro/waha-plus:noweb-arm nanzinmedina/waha-plus:noweb-arm
      - name: Login to nanzinmedina Docker HUb
        uses: docker/login-action@v3
        with:
          username: ${{ vars.NANZINMEDINA_DOCKERHUB_USERNAME }}
          password: ${{ secrets.NANZINMEDINA_DOCKERHUB_TOKEN }}
      - name: Push images to nanzinmedina Docker HUb
        run: |
          docker push nanzinmedina/waha-plus:latest-arm
          docker push nanzinmedina/waha-plus:chromium-arm
          docker push nanzinmedina/waha-plus:gows-arm
          docker push nanzinmedina/waha-plus:noweb-arm